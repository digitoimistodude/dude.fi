/*! dude 28-02-2019 14:43 - Digitoimisto Dude Oy (moro@dude.fi) */
!function(d){d(document).ready(function(){d(".likes").on("click",function(){var e=d(this).data("id"),s=JSON.parse(localStorage.getItem("dude_liked_posts"));if(null===s&&(s=[]),-1<d.inArray(e,s)){d(this).removeClass("liked");var t="/wp-json/dude/v1/post/"+e+"/unlike",n=s.indexOf(e);-1<n&&s.splice(n,1)}else{d(this).addClass("liked"),s.push(e);t="/wp-json/dude/v1/post/"+e+"/like"}jQuery.ajax({method:"GET",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",dudelike.nonce)},url:t}).done(function(e){0!==e.length&&"success"===e.status&&(d(".likes span").html(e.count),localStorage.setItem("dude_liked_posts",JSON.stringify(s)))})})})}(jQuery);